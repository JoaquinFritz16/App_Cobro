{% extends 'base.html' %}
{% block content %}
<h1>Checkout</h1>

<p>Productos de la orden:</p>
<ul>
  {% for item in items %}
  <li>{{ item.title }} x {{ item.quantity }} = ${{ item.unit_price }}</li>
  {% endfor %}
</ul>

<div id="wallet_container"></div>

<script src="https://sdk.mercadopago.com/js/v2"></script>
<script>
  const mp = new MercadoPago("{{ mp_public_key }}", { locale: "es-AR" });

  mp.checkout({
    preference: {
      id: "{{ preference.id }}",
    },
    render: {
      container: "#wallet_container",
      label: "Pagar con Mercado Pago",
    },
  });
</script>
{% endblock %}
